/* ====== БАЗА ====== */
:root{
  --bg:#0b1220;
  --text:#e5e7eb;
  --muted:#94a3b8;
  --card:#111827;
  --line:#253041;
  --accent:#22c55e;
  --danger:#ef4444;
  --warn:#f59e0b;
  --x:#60a5fa;
  --o:#f472b6;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,'Helvetica Neue',Arial,'Noto Sans',sans-serif;
  background:var(--bg);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

#app{padding:16px 16px 92px}

/* ====== КАРТОЧКА И ШАПКИ ИГРОКОВ ====== */
.wrap{max-width:520px;margin:0 auto}
.card{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:16px;
  padding:12px 12px 16px;
  box-shadow:0 10px 30px rgba(0,0,0,.35);
}

.badges{
  display:flex;
  justify-content:space-between;
  gap:12px;
  align-items:center;
  margin-bottom:8px;
}
.badge{
  display:flex;
  align-items:center;
  gap:10px;
  padding:8px 10px;
  background:rgba(255,255,255,.02);
  border:1px solid var(--line);
  border-radius:12px;
  min-width:0;
  flex:1;
}
.badge .info{display:flex;align-items:center;gap:10px;min-width:0}
.badge .ava{width:28px;height:28px;border-radius:50%;object-fit:cover;border:1px solid var(--line);background:#0a0e1a}
.badge .text{display:flex;flex-direction:column;gap:2px;min-width:0}
.badge .name{
  white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
  color:var(--text);opacity:.95;font-weight:600;
}
.badge .username{
  white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
  color:var(--muted);
  font-size:12px;
  opacity:.85;
}
.mark{
  font-weight:800;letter-spacing:.5px;
  padding:2px 8px;border-radius:8px;border:1px solid var(--line);
}
.mark.x{color:#0b3770;background:rgba(96,165,250,.18)}
.mark.o{color:#5b103b;background:rgba(244,114,182,.18)}

/* ====== СТРОКА СТАТУСА ====== */
.status-line{
  margin:8px 0 10px;
  text-align:center;
  font-weight:700;
  color:var(--text);
  opacity:.95;
}
.blink{animation:blink 1s linear infinite}
@keyframes blink{50%{opacity:.5}}

/* ====== ДОСКА 3×3 ====== */
.board{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
}
.cell{
  height:110px;
  background:#0e1726;
  border:1px solid var(--line);
  border-radius:14px;
  font-size:46px;
  font-weight:900;
  color:var(--text);
  display:flex;align-items:center;justify-content:center;
  cursor:pointer;
  transition:transform .12s ease, background .2s ease, border-color .2s ease, box-shadow .2s ease;
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.02);
}
.cell:hover{transform:translateY(-1px);border-color:#2f3c52}
.cell:active{transform:translateY(0)}
.cell.disabled{opacity:.55;cursor:not-allowed}
.cell.x{color:var(--x)}
.cell.o{color:var(--o)}
.cell.win{outline:2px solid var(--accent);box-shadow:0 0 0 3px rgba(34,197,94,.25)}

/* эффект ховера из дополнений */
.cell{position:relative;overflow:hidden}
.cell::before{
  content:'';
  position:absolute;top:50%;left:50%;
  width:0;height:0;border-radius:50%;
  background:radial-gradient(circle, rgba(34,197,94,.18) 0%, transparent 70%);
  transform:translate(-50%,-50%);
  transition:all .3s ease;
}
.cell:hover::before{width:120px;height:120px}

/* ====== НАВБАР ВНИЗУ ====== */
.navbar{
  position:fixed;left:0;right:0;bottom:0;
  padding:10px 12px;
  backdrop-filter:blur(20px);
  background:rgba(15,23,42,.6);
  border-top:1px solid var(--line);
  display:flex;gap:10px;justify-content:space-between;
}
.navbtn{
  flex:1;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  gap:6px;
  background:rgba(255,255,255,.03);
  border:1px solid var(--line);
  border-radius:14px;
  padding:8px 10px;
  cursor:pointer;
  transition:transform .12s ease, background .2s ease, border-color .2s ease;
}
.navbtn:active{transform:scale(.98)}
.navbtn.active{background:rgba(34,197,94,.12);border-color:#365b43}
.navbtn .sym{height:28px;display:flex;align-items:center;justify-content:center}
.icon{width:22px;height:22px;display:block}
.icon-lg{width:28px;height:28px}
.navbtn .label{font-size:12px;color:var(--muted)}

/* ====== МОДАЛКА ====== */
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:1000;background:rgba(0,0,0,.4)}
.modal.show{display:flex}
.modal .box{
  width:min(92vw,460px);
  background:var(--card);
  border:1px solid var(--line);
  border-radius:16px;
  padding:16px;
  color:var(--text);
  animation:slideInUp .25s ease;
}
.modal h3{margin:0 0 8px;font-size:18px}
.modal .body{margin:0 0 14px;color:var(--muted);max-height:60vh;overflow-y:auto;display:flex;flex-direction:column;gap:12px}
.modal .body:empty{display:none}
.modal .body p{margin:0;color:var(--muted)}
.modal .body .modal-text{line-height:1.4;color:var(--text)}
.modal .body .modal-phrase{line-height:1.4;color:var(--text);opacity:.88;font-size:14px}
.modal .row{display:flex;gap:10px;justify-content:flex-end}
.btn{
  border:1px solid var(--line);
  background:#0e1726;
  color:var(--text);
  padding:8px 12px;border-radius:10px;cursor:pointer;
}
.btn.primary{background:var(--accent);border-color:#1c7b44;color:#08140e}

/* ====== НОТИФИКАЦИИ ====== */
#notification-container{position:fixed;top:20px;right:20px;z-index:1100;pointer-events:none}
.notification{
  background:var(--card);border:1px solid var(--line);
  border-radius:12px;padding:12px 14px;max-width:320px;
  transform:translateX(100%);transition:transform .25s ease; margin-top:10px;
}
.notification.show{transform:translateX(0)}
.notification .notification-content{display:flex;align-items:center;gap:8px}
.notification .notification-message{flex:1}
.notification .notification-close{pointer-events:auto;background:transparent;border:0;color:var(--muted);font-size:18px;cursor:pointer}
.notification.success{border-left:4px solid var(--accent)}
.notification.error{border-left:4px solid var(--danger)}
.notification.warning{border-left:4px solid var(--warn)}

/* ====== ДОП. АНИМАЦИИ ====== */
@keyframes slideInUp { from { transform:translateY(10px);opacity:0 } to { transform:none;opacity:1 } }

/* ====== АВТОР ====== */
.author-badge{
  margin:16px auto 0;
  display:inline-flex;
  align-items:center;
  gap:10px;
  padding:8px 12px;
  border-radius:999px;
  border:1px solid var(--line);
  background:rgba(255,255,255,.03);
  color:var(--muted);
  font-size:12px;
  cursor:pointer;
  transition:background .2s ease,border-color .2s ease,transform .12s ease;
}
.author-badge:hover{background:rgba(255,255,255,.05);border-color:#324055;transform:translateY(-1px)}
.author-badge:active{transform:translateY(0)}
.author-badge img{
  width:26px;height:26px;border-radius:50%;object-fit:cover;border:1px solid var(--line);
}
.author-badge span{font-weight:600;color:var(--text);opacity:.85}
.author-badge small{color:var(--muted);font-weight:500}

/* ====== АДАПТИВ ====== */
@media (max-width:480px){
  #app{padding-bottom:100px}
  .cell{height:95px;font-size:42px}
  .badge .name{max-width:120px}
}
